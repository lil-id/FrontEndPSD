<!doctypehtml><html lang=en translate=no><meta content=notranslate name=google charset=utf-8><meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0"name=viewport><link href=globals.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.5.1.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css rel=stylesheet><title>Public Smart Dispenser</title><style>.info-order,.info-qr{box-shadow:0 4px 4px #00000040}.capacity-water,.main-title,.price-order,.title-order,.title-qr{text-align:center;position:relative;font-family:Poppins,Helvetica}.capacity-water,.dash-ungu-long,.dash-ungu-short,.info-order,.info-qr,.main-title,.price-order,.title-order,.title-qr{position:relative}.desc-qr,.image-qr,.main{display:flex}.main{margin-top:46px;flex-direction:column}.main-title{font-weight:700;color:#444245;font-size:48px;margin-top:48px}.info-order{width:820px;height:346px;background-color:#fff;border-radius:40px;border:3px solid #814092;margin:32px auto auto}.title-order{font-weight:600;color:#444;font-size:32px;margin-top:50px}.price-order{font-weight:700;color:#28a745;font-size:48px;margin-top:38px;margin-bottom:38px}.dash-ungu-long{align-items:center;width:auto;height:1.5px;background-color:#814092;margin:auto}.capacity-water{font-weight:500;color:#814092;font-size:24px;margin-top:28px}.info-qr{margin:32px auto auto;width:820px;height:581px;background-color:#fff;border-radius:40px;border:3px solid #814092}.title-qr{font-weight:700;color:#814092;font-size:32px;margin-top:18px;margin-bottom:18px}.dash-ungu-short{align-items:center;width:200px;height:2px;background-color:#814092;margin:auto}.desc-qr{margin:18px auto auto;flex-direction:row;align-items:center;justify-content:center;justify-items:center;align-content:center}.image-qr{flex-direction:column;width:410px}.icon-qr,.qr-code{align-items:center;position:relative}.icon-qr{width:244px;height:73px;margin:auto}.qr-code{margin:18px auto auto;width:336px;height:336px;object-fit:cover}.countdown,.guide-title{align-items:center;align-content:center;font-weight:700}.guide-qr{width:410px}.countdown{margin:24px auto auto;font-family:Poppins,Helvetica;font-size:36px;text-align:center}.guide-desc,.guide-title{font-size:18px;position:relative;font-family:Poppins,Helvetica;text-align:center}.guide-title{margin-top:52px;margin-left:auto;margin-right:auto;width:325px;height:42px;border-radius:24px;border:1px solid #814092;color:#814092}.guide-desc{margin-top:24px;padding-left:32px;padding-right:32px;font-weight:500;color:#444}.cancel{position:relative;cursor:pointer;width:360px;height:64px;margin:56px auto auto;background-color:#d1373b;border:#d1373b;border-radius:32px;box-shadow:4px 4px 4px -1px #00000040;align-items:center;font-family:Poppins,Helvetica;font-weight:700;color:#fff;font-size:24px;text-align:center}</style><script>function home(){window.location.href="/home"}setTimeout(function(){window.location.href="/home"},12e4)</script><div class=content><div class=header><div class=logo><img class=logo-psd src="https://firebasestorage.googleapis.com/v0/b/psd-display.appspot.com/o/img-psd.png?alt=media&token=8be1db1e-f385-4a44-bcab-134df4eddc1b"onclick=home()> <img class=logo-unm src="https://firebasestorage.googleapis.com/v0/b/psd-display.appspot.com/o/img-unm.svg?alt=media&token=e881e559-bdb2-4aa5-8b32-61db6c037304"onclick=home()></div><div class=title><div class=title-top><p><b>“Siapkan <i>Tumbler</i> mu,</b></p><b>Kurangi Sampah Plastik!”</b></div><div class=title-bottom><div class=header-web><img class=header-web-image src=img-web.svg><p class=header-web-link>www.psd.diginus.id</div><div class=header-ig><img class=header-ig-image src=img-ig.svg><p class=header-ig-link>psd.diginus.id</div></div></div></div><div class=main><p class=main-title>Konfirmasi Pembelian<div class=info-order><p class=title-order>Pembelian Air Ukuran - ML<p class=price-order>-<div class=dash-ungu-long></div><p class=capacity-water>Kapasitas air tersedia: -%</div><div class=info-qr><p class=title-qr>Generate QR Code Transaction<div class=dash-ungu-short></div><div class=desc-qr><div class=image-qr><img class=icon-qr src=img-qris.svg> <img class=qr-code src=""></div><div class=guide-qr><p class=countdown>01:00<p class=guide-title>QR Code berlaku selama 1 menit<p class=guide-desc>Setelah melakukan scan QR Code, harap menunggu dan jangan menekan tombol apapun.</div></div></div><button class=cancel onclick=home()>Batalkan Transaksi</button></div><div class=footer><div class=footer-web><img class=footer-web-image src=img-web.svg><p class=footer-web-link>www.psd.diginus.id</div></div></div><script>var getqr=!0,check=!1;function formatRupiah(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function startCountdown(){const t=document.querySelector(".countdown");let e=Date.now()+1e3*countdownTime;const n=setInterval((()=>{let a=Math.max(0,e-Date.now());const o=Math.floor(a/6e4),r=Math.floor(a%6e4/1e3);t.textContent=`${String(o).padStart(2,"0")}:${String(r).padStart(2,"0")}`,a<=0&&(clearInterval(n),t.textContent="00:00")}),100)}function getQR(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let t=this.responseText;if(""!=t){let e="https://api.qrserver.com/v1/create-qr-code/?size=336x336&data="+encodeURIComponent(t);document.querySelector(".qr-code").src=e,getqr=!1,check=!0,countdownTime=60,startCountdown()}}},t.open("GET","/qr",!0),t.send()}function updateVolume(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=this.responseText;document.querySelector(".title-order").textContent="Pembelian Air Ukuran "+formatRupiah(t)+" ML",document.querySelector(".price-order").textContent="Rp. "+formatRupiah(t)}},t.open("GET","/volume",!0),t.send()}function updateCapacity(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=this.responseText;document.querySelector(".capacity-water").textContent="Kapasitas air tersedia: "+t+"%"}},t.open("GET","/capacity",!0),t.send()}function checkQR(){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&("SUCCEEDED"==this.responseText?(check=!1,window.location.href="/success-buy"):"EXPIRED"==this.responseText&&(check=!1,window.location.href="/expired"))},t.open("GET","/check-qr",!0),t.send()}$(document).ready((function(){getQR(),updateVolume(),updateCapacity();var t=setInterval((function(){getqr?getQR():check?checkQR():clearInterval(t)}),1e3)})),document.addEventListener("contextmenu",(function(t){t.preventDefault()}));</script>